/* FAMPROV app skeleton
   Next step: paste your full, exact game copy into GAMES exactly as written.
   Do not â€œclean upâ€ spacing or punctuation unless you want it changed.
*/

const GAMES = [

{
  number: 1,
  category: "WARM UP / CONNECTING GAMES",
  title: "Counting to Ten",
  text: `**How to play**
Try to count to ten as a pair or group without speaking at the same time and without deciding who goes next. // One person starts by saying â€œone.â€ // Anyone can say the next number in order, but if two people speak at once, you must start over at â€œone!â€
**Example**
One person says â€œone.â€ // Another says â€œtwo.â€ // Someone else says â€œthree.â€ // If two people say â€œfourâ€ at the same time, you reset and begin again at â€œone.â€
**Optional challenge**
- Once you succeed, try counting to twenty for a bigger challenge! //
- try looking at the floor so youâ€™re not tempted to signal to each other to speak!`
,
  videoUrl: ""
},

{
  number: 2,
  category: "WARM UP / CONNECTING GAMES",
  title: "Rules",
  text: `**How to play**
Start by counting to five together. // Then take turns creating a new silly rule to replace one number.

**Example**
One player says, â€œInstead of saying â€˜four,â€™ weâ€™re going to clap.â€ // You then count together: 1, 2, 3, clap, 5. // Next, another player adds a rule, such as, â€œInstead of saying â€˜two,â€™ we shout â€˜Yippee!â€™â€ // Now you count: 1, Yippee!, 3, clap, 5.

Continue adding rules for numbers (including ones already changed) until you can count to five using only the rules.

**Optional challenge**
Speed it up once you get the hang of it, or increase the number beyond five!`,
  videoUrl: ""
},

{
  number: 3,
  category: "WARM UP / CONNECTING GAMES",
  title: "Word Association A to B",
  text: `**How to play**
One player says a random word. // The next player immediately says the first word that comes to mind based on what they just heard. // Players go back and forth, each word directly responding to the previous one.

**Example**
Player one says â€œhorse.â€ // Player two says â€œshoe.â€ // Player one says â€œsock.â€

**Focus**
Let each word be truly based on what the other person just said. // Avoid planning ahead or taking too long. // The goal is to stay present and tuned in to each other.`,
  videoUrl: ""
},

{
  number: 4,
  category: "WARM UP / CONNECTING GAMES",
  title: "Word Association A to C",
  text: `**How to play**
This is a more challenging twist on word association where players secretly skip a step. // The first person says a random word. // The next person thinks of a word related to it but does not say it out loud. // Instead, they say a word associated with that secret middle word. // Each player continues using the same â€œsecret middleâ€ rule.

**Example**
Player one says â€œbanana.â€ // Player two thinks â€œyellowâ€ but says â€œsun.â€ // The next player might think â€œhotâ€ and say â€œcheese.â€

Because everyone is skipping a step, the words become very random very quickly!`,
  videoUrl: ""
},

{
  number: 5,
  category: "WARM UP / CONNECTING GAMES",
  title: "Word Ball",
  text: `**How to play**
This game follows the same rules as Word Association A to B, but players pretend to throw and catch an imaginary ball. // Each time you catch the ball, you repeat the word you were thrown before saying your new word.

**Example**
Player one says â€œpotatoâ€ and pretends to throw the ball. // Player two â€œcatchesâ€ it, repeats â€œpotato,â€ then throws it back saying â€œmash.â€ // Player one catches, repeats â€œmash,â€ and throws it back saying â€œsquish.â€

**Optional variation**
You can use a real ball if you want, but an imaginary one works just as well. // The physical action alone helps keep everyone engaged and focused.`,
  videoUrl: ""
},

{
  number: 6,
  category: "WARM UP / CONNECTING GAMES",
  title: "What If I Smiled Like This",
  text: `**How to play**
Players take turns saying, â€œWhat if I smiled like this?â€ // and then immediately making the silliest, strangest, or most exaggerated smile they can think of.

**Example**
One player asks, â€œWhat if I smiled like this?â€ // and freezes in a wildly goofy grin. // The next player takes a turn with their own made-up smile.

**Challenge**
Try not to smile for real in between turns. // Keep a straight face until itâ€™s your turn again.`,
  videoUrl: ""
},

{
  number: 7,
  category: "WARM UP / CONNECTING GAMES",
  title: "What If I Laughed Like This",
  text: `**How to play**
Players take turns saying, â€œWhat if I laughed like this?â€ // and then letting out the goofiest, strangest, or most unexpected laugh they can come up with on the spot.

**Example**
One player asks, â€œWhat if I laughed like this?â€ // and bursts into an over-the-top laugh. // When theyâ€™re done, they snap back to a straight face before the next player goes.

**Challenge**
Try not to laugh for real in between turns, and see if you can return to a neutral face immediately after your laugh.

**Optional variations**
8. What if I cried like this //
9. What if I sang like this //
10. What if I farted like this (use funny mouth sounds) //
11. What if I burped like this //
12. What if I yawned like this (this works especially well when everyone is tired! Try turning your yawn into a dramatic opera-style song or weird sound to brighten the mood)`,
  videoUrl: ""
},

{
  number: 13,
  category: "WARM UP / CONNECTING GAMES",
  title: "Read My Mind",
  text: `**How to play**
One player freezes in a dramatic facial expression. // The other player looks at the face and says out loud what they think the inner thoughts of that face might be.

**Example**
Player one makes an over-the-top grossed-out face with their tongue sticking out and eyes squinting. // Player two says, â€œEwww, I canâ€™t believe I just drank milk that expired in 1972!â€ // Then switch roles and repeat.

**Optional challenge**
Encourage bigger, more exaggerated faces or longer inner monologues to increase the silliness. // This could include incorporating movement into the facial expressions, like doing three different facial expressions back-to-back to give the other player a bit of a story to tell.

Example: a frown, then a scared face, then a sleepy face might prompt the other player to say, â€œAw man, I dropped my sandwichâ€¦ Aaa! Thereâ€™s a tarantula crawling on it! Oh, that was just a hairball and now Iâ€™m sleepy from all that excitement and no snack.â€`,
  videoUrl: ""
},

{
  number: 14,
  category: "WARM UP / CONNECTING GAMES",
  title: "Mind Meld",
  text: `**How to play â€” Option 1: Simple Mind Reading**
Count down together from three. // On â€œone,â€ try to say the same word at the same time. // This works best when one person (often the child) acts as the leader and the other player carefully observes and tunes in, with the leader speaking slowly and clearly.

**How to play â€” Option 2: Category Mind Meld**
Choose a category such as food, animals, or sports. // Count down and try to say the same word from that category at the same time. // See how many tries it takes to match.

**How to play â€” Option 3: Convergence**
This version works best with slightly older kids. // Count down from three and say two random words at the same time. // Without speaking, both players think of a word that could connect those two words. // On the next count of three, say that connecting word. // Continue repeating this process until you end up saying the same word at the same time.

**Tip**
If you start feeling stuck, reset and begin again with a brand-new word. // In improv, this is sometimes called â€œgoing out to go in,â€ meaning you zoom out of the game so you can re-enter with fresh energy. // The goal is to have fun, not to force it!`,
  videoUrl: ""
}
   {
  number: 24,
  category: "CONVERSATION GAMES",
  title: "Yes, And",
  text: `**How to play**
One person starts by saying a statement. // The other person must respond beginning with the words â€œYes, andâ€¦â€, agreeing with what was just said and adding a new detail that fits. // Players take turns continuing the exchange, always accepting the last idea and building on it.

The only rule is that responses must start with â€œYes, and...â€

**Example**
Player one: â€œIâ€™m so excited itâ€™s your birthday today!â€ // Player two: â€œYes, and itâ€™s almost time to eat cake...â€ // Player one: â€œYes, and itâ€™s our favorite kind, chocolate with sprinkles.!â€ // Player two: â€œYes, and I canâ€™t believe the sprinkles were on sale for half off at the grocery store!â€

**How it works**
Each new sentence grows directly out of what the last person said. // No correcting, redirecting, or taking over the story. // Just listening, accepting, and adding! // This â€œyes, andâ€ principle is the basis of improv, so this is a perfect game to introduce the concept.

**Optional prompts to get started**
* â€œWeâ€™re going on an adventureâ€¦â€
* â€œThis is the best day ever becauseâ€¦â€
* â€œSomething surprising just happenedâ€¦â€
* â€œI just opened the door and sawâ€¦â€

**Optional challenge**
* Set a timer and try to keep the story going for a full minute without pausing - itâ€™s a great exercise in not overthinking!
* Switch to whispering, dramatic voices, or silly accents

**Why this game matters**
This game helps kids practice listening, flexibility, and cooperation in real time. // It encourages letting go of control, trusting the group, and discovering that building together is more fun than steering alone.`,
  videoUrl: ""
},

{
  number: 25,
  category: "CONVERSATION GAMES",
  title: "Yes, But",
  text: `**How to play**
One person makes a statement. // The next person must respond starting with â€œYes, butâ€¦â€, agreeing with what was said and then adding a surprising or silly detail that changes the direction slightly. // Players take turns continuing the conversation, always accepting what came before while introducing a new twist.

The key is that the â€œbutâ€ adds interest, not resistance!

**Example**
Player one: â€œI heard thereâ€™s a new ice cream shop down the street.â€ // Player two: â€œYes, but they only serve pickle-flavored ice creamâ€¦â€ // Player one: â€œYes, but itâ€™s apparently really delicious!â€ // Player two: â€œYes, but they serve it with chopsticks instead of spoons.â€ // Player one: â€œYes, but the chopsticks help you pick out the pickle chunks.â€

**How it works**
Each response still agrees with the reality of the story. // The fun comes from how strange or unexpected the twists become, not from shutting ideas down.

**Optional prompts to get started**
* â€œWe just found a secret doorâ€¦â€
* â€œSomething unusual showed up at dinnerâ€¦â€
* â€œOur family won a prizeâ€¦â€
* â€œThereâ€™s a new rule at schoolâ€¦â€

**Optional challenge**
* Switch between Yes, And and Yes, But to feel the difference`,
  videoUrl: ""
},

{
  number: 26,
  category: "CONVERSATION GAMES",
  title: "Out-Compliment Each Other",
  text: `**How to play**
One person starts by giving a compliment. // The other person responds by saying â€œThank you, butâ€¦â€, then uses something from the first compliment to inspire a new, bigger, or more unexpected compliment back. // Players take turns continuing the exchange, always building off the last compliment.

The goal is not sincerity or realism, but playful escalation.

**Example**
Player one: â€œI just love your shoes!â€ // Player two: â€œThank you, but I love the way your shoes squeak when you walk. It reminds me of a cute mouse.â€ // Player one: â€œThank you, but speaking of mice, I love the way you eat cheese so carefully!â€ // Player two: â€œThank you, but the way I eat cheese is nothing compared to your cheesy jokes. You always make me laugh!â€`,
  videoUrl: ""
},

{
  number: 27,
  category: "CONVERSATION GAMES",
  title: "Pretend Interview",
  text: `**How to play**
Choose one person to be the Interviewer and one person to be the Special Guest. // You can pretend itâ€™s a radio show, podcast, or talk show! // The interviewer greets the â€œaudienceâ€ and introduces the guest, inventing a random personality, job, or character for them. // The guest accepts the character and answers questions as that character, building on the details using Yes, And.

After a few questions, switch roles.

**Example**
Interviewer: â€œHello and welcome to F.A.R.T. 101.5. We have a very special guest with us today. She is a traveling goat trainer who is in town performing a show where she dances and does tricks with goats. Matilda, tell us all about your show and how you got into goat training.â€ // Guest: â€œYes, thank you for having me. I got interested in goats when I was three years old and met a goat named Ralph at the petting zoo. The rest is history!â€

**How it works**
The interviewer keeps asking curious questions. // The guestâ€™s job is to accept the character and keep adding details instead of correcting or steering away from it.

**Optional prompts to inspire characters**
* A famous chef
* A superhero
* An explorer
* A musician or singer
* An actor promoting a new film

**Optional challenge**
* Record the interview using a voice memo app and listen back later
* Add a commercial break or radio show jingle`,
  videoUrl: ""
},

{
  number: 28,
  category: "CONVERSATION GAMES",
  title: "Questions Only",
  text: `**How to play**
Have a conversation where every response must be a question. // Players take turns responding to each other, but if someone accidentally makes a statement instead of asking a question, you can either laugh and keep going or decide to reset and start over.

The goal is to stay curious and keep the conversation moving.

**Example**
Player one: â€œDid you see Susan yesterday?â€ // Player two: â€œSusan Bumsquat?â€ // Player one: â€œIsnâ€™t that the Susan we met at the holiday party?â€ // Player two: â€œWas she the one dressed like an elf?â€ // Player one: â€œWhy do elves wear pointy shoes?â€

**Optional prompts to get started**
* â€œDid you hear what happened today?â€
* â€œDo you remember that strange noise we heard yesterday?â€
* â€œIs this where we left the treasure?â€
* â€œWhy is everyone looking at us?â€`,
  videoUrl: ""
},

{
  number: 29,
  category: "CONVERSATION GAMES",
  title: "Gibberish",
  text: `**How to play**
Have a conversation using only gibberish. // Players make up sounds instead of real words while using facial expressions, gestures, and tone to communicate. // The goal is to listen closely and respond as if the gibberish is a real language.

**Example**
One player speaks in expressive gibberish with dramatic gestures. // The other player responds in gibberish, reacting as if they fully understand what was just said.

**How it works**
There are no real words, but the conversation should still feel connected. // Pay attention to inflection, rhythm, and body language to guide your response.

**Optional variations**
* Make sounds by gently dragging a finger up and down over your lips
* Use big emotions like excitement, frustration, or surprise
* After the scene, guess what the other person was â€œsayingâ€ and see if you were close!`,
  videoUrl: ""
},

{
  number: 30,
  category: "CONVERSATION GAMES",
  title: "Gibberish Translator",
  text: `**How to play**
Choose one player to be the Gibberish Speaker and another to be the Translator. // The Gibberish Speaker talks in gibberish while the Translator listens. // After each gibberish sentence, pause and let the Translator explain what they think was just said.

If there are multiple players, you can have several Gibberish Speakers talking to each other, pausing periodically so one or more Translators can interpret.

**Example**
Gibberish Speaker delivers an expressive gibberish sentence. // Pause. // Translator says, â€œTheyâ€™re explaining how they were late to the party because a dragon blocked the road.â€

**Reminder**
There are no wrong answers. // The Translator bases their interpretation on facial expressions, tone, and gestures, and the Gibberish Speaker goes along with it!

**Optional prompts to get you started**
* Telling a story that begins with â€œOnce upon a timeâ€¦â€
* Explaining something that happened earlier that day
* Giving a dramatic speech
* Sharing exciting news`,
  videoUrl: ""
},

{
  number: 31,
  category: "CONVERSATION GAMES",
  title: "Alphabet Conversation",
  text: `**How to play**
Have a conversation together, taking turns speaking. // Each new sentence must begin with the next letter of the alphabet in order.

The conversation can be completely made up. // You can give each other new names, invent situations, and go in any direction you want.

**Example**
Player one: â€œAhh, Gerald, how are you today?â€ // Player two: â€œBeen better.â€ // Player one: â€œCat ran away again?â€ // Player two: â€œDang cat always running away, yes!â€

**Tip**
The goal is not to be clever or perfect, but to keep the conversation moving. // If someone gets stuck, the other player can help by suggesting a word, reminding them of the letter, or jumping in to support.`,
  videoUrl: ""
},

{
  number: 32,
  category: "CONVERSATION GAMES",
  title: "Counting Conversation",
  text: `**How to play**
Take turns saying a sentence at a time to each other, having a made-up conversation. // Each turn must include one more word than the previous turn. // Start with one word, then two words, then three, and continue building upward. // Try to work your way up to ten, or more!

**Example**
Player one: â€œHi.â€ // Player two: â€œHi, Barbara!â€ // Player one: â€œHow are you?â€ // Player two: â€œIâ€™m feeling excited today!â€ // Player one: â€œDid you get that job??â€`,
  videoUrl: ""
}


   {
  number: 15,
  category: "SOUND AND FACIAL EXPRESSION GAMES",
  title: "Magic Mirror (No Sound)",
  text: `**How to play**
Choose one player to be the leader. // The leader slowly changes their facial expression, moving into big, dramatic faces. // The other player or players act as a mirror, copying the face in real time as closely as possible.

**Example**
The leader slowly raises their eyebrows, squints their eyes, and twists their mouth into an exaggerated shape. // The mirror players follow along, matching the expression as it shifts.

**Optional challenge**
Add slow hand gestures or gentle body movements while keeping the same pace.`,
  videoUrl: ""
},

{
  number: 16,
  category: "SOUND AND FACIAL EXPRESSION GAMES",
  title: "Magic Mirror (With Sound)",
  text: `**How to play**
Play this the same way as Magic Mirror (No Sound), but include sound. // The leader begins making a sound while slowly changing their facial expression. // The mirror players copy both the face and the sound in real time, continuing to match it as it changes.

**Example**
The leader starts with a low humming sound that slowly turns into a high squeak. // The mirror players adjust their voices and expressions to stay in sync.

**Optional challenge**
Experiment with volume, pitch, or rhythm changes while staying as perfectly mirrored as possible.`,
  videoUrl: ""
},

{
  number: 17,
  category: "SOUND AND FACIAL EXPRESSION GAMES",
  title: "Opposite Emotions",
  text: `**How to play**
Give a prompt where players must make the facial expression of one emotion while using the voice or sound of the opposite emotion. // Players take turns responding to prompts or inventing their own.

**Example**
â€œMake the face of someone who is really happy, but the sound of someone who is really sad.â€

**How it looks**
A giant beaming smile paired with dramatic sobbing, or a frown paired with cheerful giggles.

**More examples to get you started**

Opposing emotions
* Angry face, calm and peaceful voice
* Scared face, brave superhero voice
* Excited face, bored and monotone voice
* Sad face, joyful singing voice
* Proud face, embarrassed whisper
* Frustrated face, relaxed sigh
* Sleepy face, hyper and energetic voice
* Nervous face, cool and confident voice

Silly or specific scenarios
* Face of someone who just stepped in dog poop, sound of someone who won the lottery
* Face of someone who lost their favorite teddy bear, sound of someone about to eat ice cream
* Face of someone who dropped their donut, sound of someone laughing at a joke
* Face of someone stuck in traffic, sound of someone relaxing on vacation
* Face of someone who just got splashed with muddy water, sound of someone dancing at a party
* Face of someone waiting in line, sound of someone running around playing at a party`,
  videoUrl: ""
},

{
  number: 18,
  category: "SOUND AND FACIAL EXPRESSION GAMES",
  title: "Be My Voice",
  text: `**How to play**
One player is the Voice, and one player is the Face. // The Voice talks out loud, while the Face silently lip-syncs in real time, matching mouth movements and facial expressions as closely as possible so it looks like the voice belongs to them.

Switch roles after each round.

**Example**
The Voice says, â€œLet me tell you about my favorite thing to do on a rainy dayâ€¦â€ while the Face mouths the words and exaggerates expressions to match the tone.

**Optional variations**
* Set up a camera so the Voice is off-screen. When you watch it back, it looks like the person lip syncing is actually talking.
* Use prompts such as:
    * â€œHereâ€™s my most embarrassing storyâ€¦â€
    * â€œThis is the craziest thing that ever happened to meâ€¦â€
    * â€œLet me explain how I became a superhero.â€

**Optional challenge**
Have the Voice change speed, emotion, or volume without warning and see if the Face can keep up!`,
  videoUrl: ""
},

{
  number: 19,
  category: "SOUND AND FACIAL EXPRESSION GAMES",
  title: "I Make the Face, You Make the Sound",
  text: `**How to play**
One player makes a silent facial expression while the other player creates the sound they think matches that face.

**Ways to play**
* Real-time: One player makes the face while the other makes the sound at the same time.
* Two-step: The face is shown once silently. Then it is repeated while the other player adds the sound. This version allows for more accuracy, but either way is fun!

**Example**
One player freezes in a shocked, wide-eyed face. // The other responds with a dramatic gasp or high-pitched squeal.`,
  videoUrl: ""
},

{
  number: 20,
  category: "SOUND AND FACIAL EXPRESSION GAMES",
  title: "I Make the Sound, You Make the Face",
  text: `**How to play**
One player makes a sound effect, and the other player creates a facial expression that matches it.

**Ways to play**
* Real-time: The sound and face happen at the same time.
* Two-step: The sound is made once with minimal facial expression, then repeated while the other player performs a dramatic matching face.

**Example**
One player makes a slow, creaky door sound. // The other responds with a strained, squeaky facial expression.

**Optional challenge**
Limit the sound-makerâ€™s facial movement to increase the difficulty, or layer multiple sounds in a row!`,
  videoUrl: ""
},

{
  number: 21,
  category: "SOUND AND FACIAL EXPRESSION GAMES",
  title: "Guess the Emoji",
  text: `**What you need**
* A device with emojis available, or
* Emoji chart

Simple facial expression emojis work best, but more obscure emojis can be used for an extra challenge!

**How to play â€” Simple version**
Take turns secretly choosing an emoji. // Act it out using only your face while the other player guesses which emoji youâ€™re portraying.

**Example**
One player secretly chooses ðŸ˜² and acts out wide eyes and an open mouth. // The other player guesses ðŸ˜².

**How to play â€” Two-device challenge**
One player secretly chooses three emojis and acts them out one at a time. // The other player writes down or remembers the emojis they think are being performed. // Compare lists at the end to see how many matched.

**Example**
Player one acts out ðŸ˜¡ â†’ ðŸ¤” â†’ ðŸ˜‚ // Player two guesses ðŸ˜¡ â†’ ðŸ˜ â†’ ðŸ˜‚ // Then you compare which ones matched.

**How to play â€” Printable chart version**
Using the emoji chart, one player secretly picks an emoji in their head and acts it out. // The other player points to the emoji on the chart they think is being replicated. // Then switch roles.

**Example**
One player acts out ðŸ˜œ. // The other player points to ðŸ˜œ on the chart.

**Optional challenge**
* Use less obvious emojis like ðŸ¤¯, ðŸ¥´, or ðŸ˜¬
* Limit yourself to only facial movement with no sound
* Make the sound you think that emoji would be making
* Exaggerate expressions as much as possible`,
  videoUrl: ""
},

{
  number: 22,
  category: "SOUND AND FACIAL EXPRESSION GAMES",
  title: "Read My Lips",
  text: `**How to play**
One player silently mouths a familiar song lyric or sentence while the other player tries to guess what is being said by watching their lips, facial expressions, and gestures. // No sound allowed.

Switch roles after each turn.

**Example**
One player silently mouths the words to â€œRow, row, row your boatâ€ while exaggerating mouth movements and facial expressions. // The other player guesses the song.

**Ways to adjust the challenge**
* Easier: Use well-known songs, rhymes, or short phrases.
    * â€œRow, row, row your boatâ€
    * â€œHappy birthdayâ€
* Harder: Use longer or sillier sentences.
    * â€œHave you ever tried eating ketchup on your ice cream?â€
    * â€œThe chicken wore sunglasses to the beach.â€

**Optional challenge**
Add big gestures or dramatic facial expressions to help communicate, or limit gestures entirely to make it trickier.`,
  videoUrl: ""
},

{
  number: 23,
  category: "SOUND AND FACIAL EXPRESSION GAMES",
  title: "Face Filters or Magic Towel",
  text: `**How to play: Magic Towel version**
Hold a towel, blanket, or piece of fabric in front of your face. // While your face is covered, quickly change your facial expression. // Lower the towel to reveal the new face as if it appeared by magic.

**Example**
You hide your face behind the towel, then lower it to reveal an over-the-top shocked face or a silly grin. // Then, raise the towel back up and when itâ€™s in front of your face again, you change it to a sad face, then lower it.

**Optional challenge**
Speed it up so the expression appears to change instantly behind the towel, like a magic trick.

**How to play: Face Filters version**
Instead of a towel, swipe your hand in front of your face (or have someone else swipe their hand). // Each swipe â€œchanges the filter,â€ meaning you instantly switch to a new facial expression.

**Example**
A hand swipes across your face and you suddenly switch from a sleepy face to an excited one.

**Optional variations**
* Add imaginary â€œfiltersâ€ such as birds flying over your head, fire breathing, sparkles, or slow-motion effects
* Include sound effects or body movement to match each new face
* Take turns being the one who swipes and the one who changes faces`,
  videoUrl: ""
}


];


const els = {
  categorySelect: document.getElementById("categorySelect"),
  gameSelect: document.getElementById("gameSelect"),
  gameCard: document.getElementById("gameCard"),
  gamePill: document.getElementById("gamePill"),
  gameTitle: document.getElementById("gameTitle"),
  gameText: document.getElementById("gameText"),
  gameVideo: document.getElementById("gameVideo"),
  gameVideoSource: document.getElementById("gameVideoSource"),
  videoEmpty: document.getElementById("videoEmpty"),
};

function uniqueCategories(games) {
  const set = new Set(games.map(g => g.category));
  return Array.from(set);
}

function gamesForCategory(games, category) {
  return games.filter(g => g.category === category);
}

function escapeHTML(str) {
  return str
    .replaceAll("&", "&amp;")
    .replaceAll("<", "&lt;")
    .replaceAll(">", "&gt;");
}

function renderTextPreserveLines(text) {
  if (!text) {
    els.gameText.innerHTML = "";
    return;
  }

  // Convert **bold**
  let formatted = text.replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>");

  // Convert // into line breaks
  formatted = formatted.replace(/\/\/\s*/g, "<br><br>");

  // Preserve existing line breaks
  formatted = formatted.replace(/\n/g, "<br>");

  els.gameText.innerHTML = formatted;
}


function setVideo(url) {
  const hasUrl = Boolean(url && String(url).trim().length);
  if (!hasUrl) {
    els.gameVideo.classList.add("hidden");
    els.videoEmpty.classList.remove("hidden");
    els.gameVideoSource.src = "";
    try { els.gameVideo.load(); } catch (e) {}
    return;
  }

  els.videoEmpty.classList.add("hidden");
  els.gameVideo.classList.remove("hidden");
  els.gameVideoSource.src = url;
  try { els.gameVideo.load(); } catch (e) {}
}

function populateCategories() {
  const cats = uniqueCategories(GAMES);

  // Reset
  els.categorySelect.innerHTML = `<option value="" selected disabled>Select a category</option>`;

  cats.forEach((cat) => {
    const opt = document.createElement("option");
    opt.value = cat;
    opt.textContent = cat;
    els.categorySelect.appendChild(opt);
  });
}

function populateGamesDropdown(category) {
  const list = gamesForCategory(GAMES, category);

  els.gameSelect.disabled = false;
  els.gameSelect.innerHTML = `<option value="" selected disabled>Select a game</option>`;

  list.forEach((g, idx) => {
    const opt = document.createElement("option");
    opt.value = String(g.number);
    opt.textContent = g.title;
    els.gameSelect.appendChild(opt);
  });
}

function showGameByNumber(number) {
  const g = GAMES.find(x => String(x.number) === String(number));
  if (!g) return;

  els.gameCard.classList.remove("hidden");
  els.gamePill.textContent = g.category || "";
  els.gameTitle.textContent = g.title || "";
  renderTextPreserveLines(g.text || "");
  setVideo(g.videoUrl || "");

  // Scroll into view on mobile
  els.gameCard.scrollIntoView({ behavior: "smooth", block: "start" });
}

function init() {
  populateCategories();

  els.categorySelect.addEventListener("change", function () {
    const cat = els.categorySelect.value;
    els.gameCard.classList.add("hidden");
    els.gameSelect.disabled = true;
    els.gameSelect.innerHTML = `<option value="" selected disabled>Select a game</option>`;
    if (cat) populateGamesDropdown(cat);
  });

  els.gameSelect.addEventListener("change", function () {
    const n = els.gameSelect.value;
    if (n) showGameByNumber(n);
  });
}

init();
